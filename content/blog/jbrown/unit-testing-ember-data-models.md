---
title: "Unit Testing Ember Data Models"
description: "<p><a href=http://emberjs.com/>Ember.js</a> is a JavaScript <a href=http://en.wikipedia.org/wiki/Model%E2%80%93view%E"
date: "2013-06-21"
author: "jbrown"
tags:
    - "blog"
---

<p><a href="http://emberjs.com/">Ember.js</a> is a JavaScript <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a> framework for creating ambitious web applications and is one that, along with the Ember Data library's models, SoftLayer uses for its projects.  The "M" in MVC stands for model which is the most important layer in an application, for if the data models are not correctly architected anything built on top of them will inherit their deficiencies.  While this post is not going to discuss how to architect your data models in Ember.js it is going to propose a way in which you can Unit Test your model's definitions so that you keep any incongruent changes from being introduced into them.</p>
<p>When we write our Unit Tests we want them to be able to completely test the definition of our data models.  This includes properties, their type, any relationships they have with other data models, the generated result of any computed properties and the properties computed properties are observing.  Take, for example, the following model definition:</p>
<div class="geshifilter">
<pre class="javascript geshifilter-javascript" style="font-family:monospace;">App.<span style="color: #660066;">User</span> <span style="color: #339933;">=</span> DS.<span style="color: #660066;">Model</span>.<span style="color: #660066;">extend</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
    firstName<span style="color: #339933;">:</span> DS.<span style="color: #660066;">attr</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'string'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
    lastName<span style="color: #339933;">:</span>  DS.<span style="color: #660066;">attr</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'string'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
    account<span style="color: #339933;">:</span>   DS.<span style="color: #660066;">belongsTo</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'App.Account'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
&nbsp;
    fullName<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'firstName'</span> <span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> <span style="color: #3366CC;">' '</span> <span style="color: #339933;">+</span> <span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'lastName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>.<span style="color: #660066;">property</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'firstName'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'lastName'</span> <span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p>Let's start with simply checking that the properties we expect to exist in our model definition in fact actually do.  We use Mocha.js, accompanied by Chai.js, to perform our Unit Tests, which is the syntax you see below:</p>
<div class="geshifilter">
<pre class="javascript geshifilter-javascript" style="font-family:monospace;">describe<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'User Model'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `firstName`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'firstName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `lastName`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'lastName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `account`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'account'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p>You may notice that we haven't written any test conditions to test for the properties existence.  This is because in order to get the meta data of the model we're testing you have to first call the metaForProperty() method before we could even write any test conditions.  If the call to metaForProperty() fails due to the property not existing then our test will fail and we have achieved what we set out to do.   We could write a test condition that specifically tests for the property name, such as like:</p>
<div class="geshifilter">
<pre class="javascript geshifilter-javascript" style="font-family:monospace;">it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `firstName`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'firstName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    expect<span style="color: #009900;">&#40;</span> property.<span style="color: #000066;">name</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'firstName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p>but I hope you can see how this is redundant.  We do want to check for other properties of each individual property though, such as its type and whether or not Ember sees the property as an attribute on the model.  The following adds these tests in:</p>
<div class="geshifilter">
<pre class="javascript geshifilter-javascript" style="font-family:monospace;">describe<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'User Model'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `firstName`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'firstName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">type</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'string'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">isAttribute</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'Expected attribute'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `lastName`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'lastName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">type</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'string'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">isAttribute</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'Expected attribute'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p>The 'account' property on our model is not what Ember considers to be an attribute but is rather a relationship.  We can setup our tests for this as follows:</p>
<div class="geshifilter">
<pre class="javascript geshifilter-javascript" style="font-family:monospace;">it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `account`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'account'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">type</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'App.Account'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">isRelationship</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'Expected relationship'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">kind</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'belongsTo'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p>The 'fullName' property is a computed property and it should be tested a little differently than the other properties we have tested so far.  A computed property can observe other properties so we need to test that this is configured correctly.  Also, up to this point we have been able to test everything about the model without any need for any mock data, relying solely on the metadata information Ember is able to provide about our model.  Most of your computed properties will likely act upon actual data so we need mock data to be able to accurately test our computed properties function.  An example of how to do this is below:</p>
<div class="geshifilter">
<pre class="javascript geshifilter-javascript" style="font-family:monospace;">it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'computed property: `fullName`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    expect<span style="color: #009900;">&#40;</span> <span style="color: #009900;">&#91;</span> <span style="color: #3366CC;">'firstName'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'lastName'</span> <span style="color: #009900;">&#93;</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">eql</span><span style="color: #009900;">&#40;</span> Ember.<span style="color: #660066;">meta</span><span style="color: #009900;">&#40;</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">proto</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">descs</span><span style="color: #009900;">&#91;</span> <span style="color: #3366CC;">'fullName'</span> <span style="color: #009900;">&#93;</span>._dependentKeys <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #003366; font-weight: bold;">var</span> store <span style="color: #339933;">=</span> DS.<span style="color: #660066;">Store</span>.<span style="color: #660066;">create</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
        revision<span style="color: #339933;">:</span> <span style="color: #CC0000;">12</span><span style="color: #339933;">,</span>
        adapter<span style="color: #339933;">:</span> DS.<span style="color: #660066;">Adapter</span>.<span style="color: #660066;">create</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    store.<span style="color: #660066;">load</span><span style="color: #009900;">&#40;</span> App.<span style="color: #660066;">User</span><span style="color: #339933;">,</span> <span style="color: #009900;">&#123;</span>
        id<span style="color: #339933;">:</span>        <span style="color: #CC0000;">1</span><span style="color: #339933;">,</span>
        firstName<span style="color: #339933;">:</span> <span style="color: #3366CC;">'Jeremy'</span><span style="color: #339933;">,</span>
        lastName<span style="color: #339933;">:</span>  <span style="color: #3366CC;">'Brown'</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #003366; font-weight: bold;">var</span> user <span style="color: #339933;">=</span> store.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span> App.<span style="color: #660066;">User</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">1</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    expect<span style="color: #009900;">&#40;</span> user.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'fullName'</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">be</span>.<span style="color: #660066;">a</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'string'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    user.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'fullName'</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">should</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'Jeremy Brown'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p>So there you have it â€“ an approach to unit testing Ember Data models that does not require mock data (except for where required) and that tests everything we need to: properties, their type, any relationships they have with other data models, the generated result of any computed properties and the properties computed properties are observing.  I leave you with a final code example below that puts all of these examples together into one and happy testing!</p>
<div class="geshifilter">
<pre class="javascript geshifilter-javascript" style="font-family:monospace;">describe<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'User Model'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `firstName`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'firstName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">type</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'string'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">isAttribute</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'Expected attribute'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `lastName`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'lastName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">type</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'string'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">isAttribute</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'Expected attribute'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'property: `account`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #003366; font-weight: bold;">var</span> property <span style="color: #339933;">=</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">metaForProperty</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'account'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">type</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'App.Account'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">isRelationship</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'Expected relationship'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        expect<span style="color: #009900;">&#40;</span> property.<span style="color: #660066;">kind</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'belongsTo'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    it<span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'computed property: `fullName`'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        expect<span style="color: #009900;">&#40;</span> <span style="color: #009900;">&#91;</span> <span style="color: #3366CC;">'firstName'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'lastName'</span> <span style="color: #009900;">&#93;</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">eql</span><span style="color: #009900;">&#40;</span> Ember.<span style="color: #660066;">meta</span><span style="color: #009900;">&#40;</span> App.<span style="color: #660066;">User</span>.<span style="color: #660066;">proto</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">descs</span><span style="color: #009900;">&#91;</span> <span style="color: #3366CC;">'fullName'</span> <span style="color: #009900;">&#93;</span>._dependentKeys <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #003366; font-weight: bold;">var</span> store <span style="color: #339933;">=</span> DS.<span style="color: #660066;">Store</span>.<span style="color: #660066;">create</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
            revision<span style="color: #339933;">:</span> <span style="color: #CC0000;">12</span><span style="color: #339933;">,</span>
            adapter<span style="color: #339933;">:</span> DS.<span style="color: #660066;">Adapter</span>.<span style="color: #660066;">create</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
        <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        store.<span style="color: #660066;">load</span><span style="color: #009900;">&#40;</span> App.<span style="color: #660066;">User</span><span style="color: #339933;">,</span> <span style="color: #009900;">&#123;</span>
            id<span style="color: #339933;">:</span>        <span style="color: #CC0000;">1</span><span style="color: #339933;">,</span>
            firstName<span style="color: #339933;">:</span> <span style="color: #3366CC;">'Jeremy'</span><span style="color: #339933;">,</span>
            lastName<span style="color: #339933;">:</span>  <span style="color: #3366CC;">'Brown'</span>
        <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #003366; font-weight: bold;">var</span> user <span style="color: #339933;">=</span> store.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span> App.<span style="color: #660066;">User</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">1</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        expect<span style="color: #009900;">&#40;</span> user.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'fullName'</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">be</span>.<span style="color: #660066;">a</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'string'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        user.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'fullName'</span> <span style="color: #009900;">&#41;</span>.<span style="color: #660066;">should</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span> <span style="color: #3366CC;">'Jeremy Brown'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p>-Jeremy</p>

